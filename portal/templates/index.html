<!-- index -->
<!DOCTYPE html>
<html lang="sk">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>MSW2016</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="copyright" content="Unionsoft" />
	<meta name="author" content="" />

	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link rel="stylesheet" type="text/css" href="/portal/css/standalone.css">
	<link rel="stylesheet" type="text/css" href="/portal/css/portal.css">
	<link rel="stylesheet" type="text/css" href="/portal/css/font-awesome.min.css">
	<link rel="icon" href="/portal/img/favicon2.png" type="image/x-icon">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>

<body>
	<div id="portal-main-container">
		<div id="portal-header-container">
			<header id="portal-main-header">
				<a href="/">
					<img class="portal-logo" src="/portal/img/logoSZH.png" width="150" alt="logo" title="caihp" />
				</a>
				<div class="social-icons">
					 <ul>
						<li><a href="https://www.facebook.com/caihp.cz" target="_new"><i class="fa fa-facebook-square fa-2x"></i></a></li>
					</ul> 
				</div>
				<div id="portal-menu-panel-container">
					{% block menu %}
						<ul id="portal-menu-panel">
							{%for k in menu %}
								<li class="portal-menu-entry">
									<a href="{% if k.hash %}#{{k.hash}}{% else %}/article/{{k.aid}}{% endif %}">{{k.name}}</a>
								</li>
							{% endfor %}
						</ul>
					{% endblock menu %}
				</div>
			</header>
		</div>
		<div id="mobile-menu-toggler">
			<a href="" class="toogle-menu" >
				<i class="fa fa-align-justify"></i>
			</a>
		</div>
		<div id="portal-content-container">
			<div id="portal-main-content">
				{% for widget in article.data %}
					<article class="portal-article {{ widget.meta.type }} portal-article-{{ widget.meta.name }} {{ widget.css.cssClass }}">
						
						{% set templatePath = "widgets/" + widget.meta.type + ".widget" %}
						{% include templatePath with widget only %}
					</article>
				{% endfor %}
				<article id="groups" class="portal-article groups portal-article-groups">
					<div class="groups-container">
						<h1>WOMEN'S YOUTH WORLD CHAMPIONSHIP GROUPS</h1>
						<section class="groups">
							<div class="group">
								<h2>GROUP A</h2>
								<div class="nationalities">
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
								</div>
							</div>
							<div class="group">
								<h2>GROUP B</h2>
								<div class="nationalities">
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
								</div>
							</div>
							<div class="group">
								<h2>GROUP C</h2>
								<div class="nationalities">
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
								</div>
							</div>
							<div class="group">
								<h2>GROUP D</h2>
								<div class="nationalities">
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
									<div class="nationality">
										<img src="../client/img/spain.jpg" height="44" width="62" alt="">
									</div>
								</div>
							</div>
						</section>
					</div>
				</article>
				<footer>
					<div class="copyright">
						<p>SZH 2016</p>
					</div>
				</footer>
			</div>
		</div>
	</div>
</body>
<script>
	//dynamic resize showcase height
	function changeHeight() {
		if($(window).width() < 1100 && $(window).width() > 640) {
			$('.x-portal-widget-showcase-view').height( $(window).width() / 2.34042);
			$('.x-portal-widget-showcase-view-image').height( $(window).width() / 2.34042);
		}else if($(window).width() < 700) {
			$('.x-portal-widget-showcase-view').height(300);
			$('.x-portal-widget-showcase-view-image').height(300);
		}else {
			$('.x-portal-widget-showcase-view').height(470);
			$('.x-portal-widget-showcase-view-image').height(470);
		}
	}
	$(document).ready(changeHeight);
	$(window).resize(changeHeight);
	//end dynamic resize showcase

	$(function() {
		$('#portal-menu-panel-container').addClass('mobile-hidden');
		var mainMenuHidden = true;
		$('.toogle-menu').click(function (e) {
			if (mainMenuHidden) {
				$('#portal-menu-panel-container').removeClass('mobile-hidden');
				$('header h1').css('visibility', 'hidden');
				$('header h2').css('visibility', 'hidden');
				mainMenuHidden = false;
			} else {
				$('#portal-menu-panel-container').addClass('mobile-hidden');
				$('header h1').css('visibility', 'visible');
				$('header h2').css('visibility', 'visible');
				mainMenuHidden = true;
			}
			e.stopPropagation();
			return false;
		});
		$('body').click(function () {
			$('#portal-menu-panel-container').addClass('mobile-hidden');
			$('header h1').css('visibility', 'visible');
			$('header h2').css('visibility', 'visible');
			mainMenuHidden = true;
		});
		$('.x-portal-widget-showcase-view').each(function() {
			$(this).bind('showcase-next', function() {
				var idx = $(this).data('showcase-current') || 0;

				$(this).find('article').eq(idx).fadeOut();

				if (idx == $(this).find('article').length - 1) {
					idx = 0;
				} else {
					++idx;
				}

				$(this).find('article').eq(idx).fadeIn();

				$(this).data('showcase-current', idx);

				var navigationEl = $(this).next();
				navigationEl.find('a.item').removeClass('active');
				navigationEl.find('a.item').eq(idx).addClass('active');

				setTimeout(function() {
					$('.x-portal-widget-showcase-view').triggerHandler('showcase-next');
				}, 3000);
			});
		}).triggerHandler('showcase-next');

		$('.x-portal-widget-showcase-navigation a.item').click(function(e) {
			var showcaseEl = $(this).parents('.x-portal-widget-showcase-navigation').prev();
			var navigationEl = $(this).parents('.x-portal-widget-showcase-navigation');
			var idx = showcaseEl.data('showcase-current') || 0;
			showcaseEl.find('article').eq(idx).fadeOut();
			idx = $(this).index();
			showcaseEl.find('article').eq(idx).fadeIn();
			showcaseEl.data('showcase-current', idx);
			navigationEl.find('a.item').removeClass('active');
			navigationEl.find('a.item').eq(idx).addClass('active');
			e.stopPropagation();
			return false;
		});

		// SHOWCASEVIDEO
		$('.x-portal-widget-showcasevideo-view').each(function() {
			var timeout;
			$(this).bind('showcasevideo-next', function() {
				var idx = $(this).data('showcasevideo-current') || 0;

				$(this).find('article').eq(idx).fadeOut();

				if (idx == $(this).find('article').length - 1) {
					idx = 0;
				} else {
					++idx;
				}

				$(this).find('article').eq(idx).fadeIn();

				$(this).data('showcasevideo-current', idx);

				var navigationEl = $(this).next();
				navigationEl.find('a.item').removeClass('active');
				navigationEl.find('a.item').eq(idx).addClass('active');

				timeout = setTimeout(function() {
					$('.x-portal-widget-showcasevideo-view').triggerHandler('showcasevideo-next');
				}, 5000);

				$(this).find('iframe').mouseenter(function() {
					clearTimeout(timeout);
				});
			});
		}).triggerHandler('showcasevideo-next');

		$('iframe').click(function(e){
			alert("klikol si");
		});

		$('.x-portal-widget-showcasevideo-navigation a.item').click(function(e) {
			var showcaseEl = $(this).parents('.x-portal-widget-showcasevideo-navigation').prev();
			var navigationEl = $(this).parents('.x-portal-widget-showcasevideo-navigation');
			var idx = showcaseEl.data('showcasevideo-current') || 0;
			showcaseEl.find('article').eq(idx).fadeOut();
			idx = $(this).index();
			showcaseEl.find('article').eq(idx).fadeIn();
			showcaseEl.data('showcasevideo-current', idx);
			navigationEl.find('a.item').removeClass('active');
			navigationEl.find('a.item').eq(idx).addClass('active');
			e.stopPropagation();
			return false;
		});
		// END SHOWCASEVIDEO

		$('.x-portal-widget-gallery').each(function(index) {
			$(this).find('.x-portal-widget-gallery-viewer-window-images').append(
				$(this).find('.x-portal-widget-gallery-thm > img').clone()
			);

			$(this).bind('gallery-next', function(e, idx) {

			});

			$(this).bind('gallery-show', function(e, idx) {
				$(this).find('.x-portal-widget-gallery-viewer').css('display', 'table-cell');
				$(this).data('gallery-current', idx);

				$(this).find('.x-portal-widget-gallery-viewer-window-images > img').eq(idx).fadeIn();
			});

			$(this).bind('gallery-next', function(e) {
				var idx = $(this).data('gallery-current');

				$(this).find('.x-portal-widget-gallery-viewer-window-images > img').eq(idx).fadeOut();

				if (idx == $(this).find('.x-portal-widget-gallery-viewer-window-images > img').length - 1) {
					idx = 0;
				} else {
					++idx;
				}

				$(this).find('.x-portal-widget-gallery-viewer-window-images > img').eq(idx).fadeIn();

				$(this).data('gallery-current', idx);
			});

			$(this).bind('gallery-prev', function(e) {
				var idx = $(this).data('gallery-current');

				$(this).find('.x-portal-widget-gallery-viewer-window-images > img').eq(idx).fadeOut();

				if (idx == 0) {
					idx = $(this).find('.x-portal-widget-gallery-viewer-window-images > img').length - 1;
				} else {
					--idx;
				}

				$(this).find('.x-portal-widget-gallery-viewer-window-images > img').eq(idx).fadeIn();

				$(this).data('gallery-current', idx);
			});

			$(this).bind('gallery-close', function(e, idx) {
				var idx = $(this).data('gallery-current');

				$(this).find('.x-portal-widget-gallery-viewer-window-images > img').eq(idx).hide();
				$(this).find('.x-portal-widget-gallery-viewer').fadeOut();
			});

			$(this).find('.x-portal-widget-gallery-close-btn').on('click', function() {
				$(this).closest('.x-portal-widget-gallery').triggerHandler('gallery-close');
			});

			$(this).find('.x-portal-widget-gallery-next-btn').on('click', function() {
				$(this).closest('.x-portal-widget-gallery').triggerHandler('gallery-next');
			});

			$(this).find('.x-portal-widget-gallery-prev-btn').on('click', function() {
				$(this).closest('.x-portal-widget-gallery').triggerHandler('gallery-prev');
			});

			$(this).find('.x-portal-widget-gallery-thm > img').each(function(idx){
				$(this).on('click', function(evt) {
					$(this).closest('.x-portal-widget-gallery').triggerHandler('gallery-show', [idx]);
				});
			});

			$(document).on('keyup', function(e){
				if (e.which == 27) {
					$('.x-portal-widget-gallery').closest('.x-portal-widget-gallery').triggerHandler('gallery-close');
				} else if (e.which == 37) {
					$('.x-portal-widget-gallery').closest('.x-portal-widget-gallery').triggerHandler('gallery-prev');
				} else if (e.which == 39) {
					$('.x-portal-widget-gallery').closest('.x-portal-widget-gallery').triggerHandler('gallery-next');
				}
			});
		});

		// animated scrolling
		$(function() {
			var menu = $('#portal-menu-panel'),
				menuLinks = menu.find('a');

			menuLinks.on('click', function(event){
				var jumpTo = this.hash;

				$('body').animate({scrollTop: $(jumpTo).offset().top}, 1000, function(){
					window.location.hash = jumpTo;
				});
				event.preventDefault();
			});	

			// back to top
			var backToTop = $('<a>', {
								href: '#portal-main-container',
								class: 'back-to-top',
								html: '<i class="fa fa-caret-up fa-4x"></i>'
							});
			backToTop
				.hide()
				.appendTo('body')
				.on('click', function(event){
					event.preventDefault();
					$('body').animate({scrollTop: 0})
				});

			var win = $(window);
			win.on('scroll', function(){
				if ( win.scrollTop() >= 300 ) backToTop.fadeIn();
				else backToTop.hide();
			})
		});
	});
</script>
</html>
